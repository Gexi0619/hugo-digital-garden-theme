{{- /* List display mode â€” single column cards
     Receives: dict "pages" $pages "show" (slice) "tags_key" (string) "id" (string)
     show options: "summary", "tags", "date", "lastmod", "status", "image", "ping"
*/ -}}
{{- $tagsKey := .tags_key -}}
{{- $show := .show | default (slice "summary" "lastmod" "status") -}}
<div class="row row-cols-1 g-2{{ with .id }} mb-5" id="{{ . }}{{ end }}">
	{{ range .pages }}
	{{- $isoClasses := "" -}}
	{{- if $tagsKey -}}
		{{- range index .Params $tagsKey -}}
			{{- $isoClasses = printf "%s js-iso-%s" $isoClasses (. | urlize) -}}
		{{- end -}}
	{{- end -}}
	<div class='col{{ $isoClasses }}'>
		<div class="card h-100 top-highlight">
			{{ if in $show "image" }}
			{{ $img := (.Resources.ByType "image").GetMatch "*featured*" }}
			{{ if $img }}
			{{ $img = $img.Fit "500x500" }}
			{{ with $img }}
			<img src="{{ .Permalink }}" alt="{{ $.Title }}" class="card-img-top p-3">
			{{ end }}
			{{ end }}
			{{ end }}
			<div class="card-body">
				<div class="row justify-content-between">
					<div class="col-7">
						<h5 class="card-title">{{ .Title }}</h5>
						{{ if in $show "summary" }}<p class="card-text">{{ .Summary }}</p>{{ end }}
					</div>
					<div class="col-5">
						<p class="card-right">
							{{ if in $show "date" }}
							<span class="card-date">{{ .Date.Format "Jan 2, 2006" }} </span>
							{{ end }}
							{{ if in $show "lastmod" }}
							<span class="card-date">{{ .Lastmod.Format "Jan 2, 2006" }}{{ if and (in $show "ping") .Params.ping }} <i class="fas fa-thumbtack" style="color: #ccc; margin-left: 0.25rem; font-size: 0.8rem;"></i>{{ end }} </span>
							{{ end }}
							{{ if in $show "status" }}
							<br/>{{ partial "status.html" . }}
							{{ end }}
							{{ if in $show "tags" }}
							<br/>
							{{ with index .Params ($tagsKey | default "tags") }}
							{{ range . }}<a href="{{ (printf "/tags/%s/" (urlize .)) | relURL }}" class="tag-link">#{{ . }}</a>{{ end }}
							{{ end }}
							{{ end }}
						</p>
					</div>
				</div>
				<a href="{{ .Permalink }}" class="stretched-link"></a>
			</div>
		</div>
	</div>
	{{ end }}
</div>
