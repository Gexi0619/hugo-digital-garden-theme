{{ define "main" }}

{{- /* Icon mapping from short names to Simple Icons slugs */ -}}
{{- $iconMap := dict
  "github"    "github"
  "instagram" "instagram"
  "youtube"   "youtube"
  "twitter"   "twitter"
  "x"         "x-twitter"
  "linkedin"  "linkedin"
  "blog"      "markdown"
  "email"     "maildotru"
  "website"   "globe"
  "tiktok"    "tiktok"
  "discord"   "discord"
  "telegram"  "telegram"
  "mastodon"  "mastodon"
  "facebook"  "facebook"
  "reddit"    "reddit"
  "medium"    "medium"
-}}

<div class="page-wrapper page-wrapper--narrow">
  <div class="pt-5 pb-3">
    <h1 class="display-2 mb-4">{{ .Title }}</h1>
    <p class="bio fs-4 body-text">{{ .Summary }}</p>
  </div>

  {{- if .Site.Data.linktree -}}
  {{- if .Site.Data.linktree.links -}}
  <div class="row row-cols-1 g-2 mb-5" id="linktree-links">
    {{- range sort .Site.Data.linktree.links "weight" -}}
    <div class="col">
      <div class="card h-100 top-highlight">
        <div class="card-body">
          <div class="row align-items-center justify-content-between">
            <!-- Left: Icon + Title -->
            <div class="col-auto d-flex align-items-center gap-3">
              {{- /* Get icon slug from map, fallback to link */ -}}
              {{- $iconSlug := index $iconMap .icon | default "link" -}}
              <img src="https://cdn.simpleicons.org/{{ $iconSlug }}" alt="{{ .icon }}" class="linktree-icon">
              <h5 class="card-title mb-0">{{ .title }}</h5>
            </div>
            <!-- Right: Note + Ping indicator -->
            <div class="col-auto">
              <p class="card-right mb-0">
                {{- if .note -}}
                <span class="card-date">{{ .note }}</span>
                {{- end -}}
                {{- if .ping -}}
                <span class="linktree-ping" title="Active"></span>
                {{- end -}}
              </p>
            </div>
          </div>
          <!-- Stretched link over entire card -->
          <a href="{{ .url }}" class="stretched-link"
             {{- if .new_tab }} target="_blank" rel="noopener"{{ end }}></a>
        </div>
      </div>
    </div>
    {{- end -}}
  </div>
  {{- end -}}
  {{- end -}}

</div>

{{ end }}
